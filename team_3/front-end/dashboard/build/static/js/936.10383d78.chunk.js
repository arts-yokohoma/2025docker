"use strict";(self.webpackChunkadmin_client=self.webpackChunkadmin_client||[]).push([[936],{867:(e,t,n)=>{n.d(t,{jE:()=>i,st:()=>l,ul:()=>r,zZ:()=>s});var o=n(9722),c=n(6943),a=n(1759);const i=async e=>{const{access_token:t,token_type:n}=e;try{const e=await o.A.get("".concat(c.B5,"/category"),{headers:{Authorization:"".concat(n," ").concat(t)}});return(0,a.y)(e,"\u30ab\u30c6\u30b4\u30ea\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(i){(0,a.h)(i)}},r=async(e,t)=>{const{access_token:n,token_type:i}=e;try{const e=await o.A.post("".concat(c.B5,"/category/delete"),t,{headers:{Authorization:"".concat(i," ").concat(n)}});return(0,a.y)(e,"\u3042\u308b\u30e1\u30cb\u30e5\u30fc\u4f7f\u7528\u3059\u308b\u304b\u3089\u30ab\u30c6\u30b4\u30ea\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,a.h)(r)}},s=async(e,t)=>{const{access_token:n,token_type:i}=e;try{const e=await o.A.post("".concat(c.B5,"/category/create"),t,{headers:{Authorization:"".concat(i," ").concat(n)}});return(0,a.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,a.h)(r)}},l=async(e,t,n)=>{const{access_token:i,token_type:r}=e;try{const e=await o.A.put("".concat(c.B5,"/category/update/").concat(t),n,{headers:{Authorization:"".concat(r," ").concat(i)}});return(0,a.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,a.h)(s)}}},3936:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(5043),c=n(6446),a=n(5865),i=n(35),r=n(6600),s=n(5316),l=n(9347),d=n(1906),h=n(7948),x=n(6559),g=n(3216),y=n(579);const u=e=>{let{selectionModel:t=[],onDeleteSelected:n,onEdit:o}=e;const a=(0,g.Zp)();return(0,y.jsxs)(c.A,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[(0,y.jsx)(c.A,{sx:{flexGrow:1}}),(0,y.jsxs)(d.A,{variant:"contained",color:"error",disabled:0===t.length,onClick:n,sx:{textTransform:"none",boxShadow:2,opacity:0===t.length?.5:1},children:["\ud83d\uddd1\ufe0f \u524a\u9664\uff08",t.length,"\uff09"]}),(0,y.jsx)(d.A,{variant:"contained",color:"info",disabled:1!==t.length,onClick:()=>o(a),sx:{textTransform:"none",boxShadow:2,opacity:1!==t.length?.5:1},children:"\u270f\ufe0f \u5909\u66f4"}),(0,y.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>a("/category/form"),sx:{textTransform:"none",boxShadow:2},children:"\u2795 \u8ffd\u52a0"})]})};var A=n(5456);const j=e=>{let{categories:t,loading:n,selectionModel:a,setSelectionModel:i}=e;const[r,s]=(0,o.useState)(10);return(0,y.jsx)(c.A,{sx:{height:650,width:"100%"},children:(0,y.jsx)(A.z,{rows:t||[],columns:[{field:"id",headerName:"ID",width:90},{field:"category_name",headerName:"\u30ab\u30c6\u30b4\u30ea",width:200}],pageSize:r,onPageSizeChange:e=>s(e),rowsPerPageOptions:[10,50,100],pagination:!0,loading:n,getRowId:e=>e.id,checkboxSelection:!0,disableSelectionOnClick:!0,selectionModel:a,onSelectionModelChange:e=>{i(e)}})})};var p=n(8729),f=n(867);const k=()=>{const[e,t]=(0,o.useState)([]),[n,g]=(0,o.useState)(!1),[A,k]=(0,o.useState)([]),[m,w]=(0,o.useState)(!1),[S,b]=(0,o.useState)(""),[C,v]=(0,o.useState)(!1),{callApiWithToken:_}=(0,p.A)();(0,o.useEffect)(()=>{(async()=>{g(!0);try{t(await _(f.jE))}catch(e){console.error("fetching error",e)}finally{g(!1)}})()},[_]);return(0,y.jsxs)(c.A,{children:[(0,y.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:"\u30ab\u30c6\u30b4\u30ea\u4e00\u89a7"}),(0,y.jsx)(u,{selectionModel:A,onDeleteSelected:()=>{0!==A.length&&v(!0)},onEdit:t=>{if(1===A.length){t("form",{state:{initialData:e.find(e=>e.id===A[0])}})}}}),(0,y.jsx)(j,{categories:e,loading:n,selectionModel:A,setSelectionModel:k}),(0,y.jsxs)(i.A,{open:C,onClose:()=>v(!1),"aria-labelledby":"confirm-dialog-title",children:[(0,y.jsxs)(r.A,{id:"confirm-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,y.jsx)(x.A,{color:"warning"}),"\u78ba\u8a8d"]}),(0,y.jsx)(s.A,{children:(0,y.jsxs)(a.A,{children:[A.length," \u4ef6\u306e\u30ab\u30c6\u30b4\u30ea\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"]})}),(0,y.jsxs)(l.A,{children:[(0,y.jsx)(d.A,{onClick:()=>v(!1),color:"inherit",children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),(0,y.jsx)(d.A,{onClick:async()=>{try{g(!0),await _(f.ul,{ids:A}),t(e=>e.filter(e=>!A.includes(e.id))),k([]),v(!1)}catch(e){b((null===e||void 0===e?void 0:e.message)||"\u524a\u9664\u30a8\u30fc\u30e9\u30fc"),w(!0)}finally{g(!1)}},color:"error",variant:"contained",disabled:n,children:"\u524a\u9664"})]})]}),(0,y.jsxs)(i.A,{open:m,onClose:()=>w(!1),"aria-labelledby":"error-dialog-title",children:[(0,y.jsxs)(r.A,{id:"error-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,y.jsx)(h.A,{color:"error"}),"\u524a\u9664\u30a8\u30e9\u30fc"]}),(0,y.jsx)(s.A,{children:(0,y.jsx)(a.A,{color:"error",children:S})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(d.A,{onClick:()=>w(!1),color:"primary",autoFocus:!0,children:"\u30aa\u30fc\u30b1\u30fc"})})]})]})}}}]);
//# sourceMappingURL=936.10383d78.chunk.js.map