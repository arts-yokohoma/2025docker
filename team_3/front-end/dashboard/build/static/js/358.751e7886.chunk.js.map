{"version":3,"file":"static/js/358.751e7886.chunk.js","mappings":"yLAIO,MAAMA,EAAkBC,UAC7B,MAAM,aAAEC,EAAY,WAAEC,GAAeC,EACrC,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,GAADC,OAAIC,EAAAA,GAAQ,aAAa,CACvDC,QAAS,CACPC,cAAc,GAADH,OAAKL,EAAU,KAAAK,OAAIN,MAGpC,OAAOU,EAAAA,EAAAA,GAAkBP,EAAU,6FACrC,CAAE,MAAOQ,IACPC,EAAAA,EAAAA,GAAeD,EACjB,GAGWE,EAAmBd,MAAOG,EAAMY,KAC3C,MAAM,aAAEd,EAAY,WAAEC,GAAeC,EACrC,IACE,MAAMC,QAAiBC,EAAAA,EAAMW,KAAK,GAADT,OAAIC,EAAAA,GAAQ,oBAAoBO,EAAM,CACrEN,QAAS,CACPC,cAAc,GAADH,OAAKL,EAAU,KAAAK,OAAIN,MAGpC,OAAOU,EAAAA,EAAAA,GACLP,EACA,qKAEJ,CAAE,MAAOQ,IACPC,EAAAA,EAAAA,GAAeD,EACjB,GAGWK,EAAiBjB,MAAOG,EAAMY,KACzC,MAAM,aAAEd,EAAY,WAAEC,GAAeC,EACrC,IACE,MAAMC,QAAiBC,EAAAA,EAAMW,KAAK,GAADT,OAAIC,EAAAA,GAAQ,oBAAoBO,EAAM,CACrEN,QAAS,CACPC,cAAc,GAADH,OAAKL,EAAU,KAAAK,OAAIN,MAGpC,OAAOU,EAAAA,EAAAA,GAAkBP,EAAU,6FACrC,CAAE,MAAOQ,IACPC,EAAAA,EAAAA,GAAeD,EACjB,GAGWM,EAAiBlB,MAAOG,EAAMgB,EAAQJ,KACjD,MAAM,aAAEd,EAAY,WAAEC,GAAeC,EACrC,IACE,MAAMC,QAAiBC,EAAAA,EAAMe,IAAI,GAADb,OAC3BC,EAAAA,GAAQ,qBAAAD,OAAoBY,GAC/BJ,EACA,CACEN,QAAS,CACPC,cAAc,GAADH,OAAKL,EAAU,KAAAK,OAAIN,MAItC,OAAOU,EAAAA,EAAAA,GAAkBP,EAAU,6FACrC,CAAE,MAAOQ,IACPC,EAAAA,EAAAA,GAAeD,EACjB,E,4ICzDF,MAyDA,EAzDqBS,IAOd,IAPe,SACpBC,EAAQ,SACRC,EAAQ,SACRC,EAAQ,aACRC,EAAY,aACZC,EAAY,YACZC,GACDN,EACC,MAAOO,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,CAAC,GAYtC,OACEC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,UAAU,OAAOC,YAAU,EAACC,aAAa,MAAKC,SAAA,EACjDC,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CACRC,WAAS,EACTC,MAAM,gBACNC,KAAK,gBACLC,MAAOpB,EAASqB,cAChBpB,SAAUA,EACVqB,OAAO,SACPC,QAASjB,EAAOa,KAChBK,WAAYlB,EAAOa,MAAQ,OAG7BV,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACe,QAAS,EAAGC,GAAI,CAAEC,QAAS,OAAQC,IAAK,GAAId,SAAA,EAC/CC,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLC,QAAQ,YACRC,MAAM,UACNC,QA3BiBC,KACvB,IAAIC,EAAmB,CAAC,EACnBlC,EAASqB,cAAcc,SAAQD,EAAiBf,KAAO,wIAC5DZ,EAAU2B,GAEmC,IAAzCE,OAAOC,KAAKH,GAAkBI,QAChCpC,KAsBIqC,SAAUnC,EACVsB,GAAI,CAAEc,cAAe,QAAS1B,SAE7BT,KAGHU,EAAAA,EAAAA,KAACc,EAAAA,EAAM,CACLC,QAAQ,YACRC,MAAM,YACNC,QAAS7B,EACTuB,GAAI,CAAEc,cAAe,QAAS1B,SAC/B,0C,uBCjDT,MA0EA,EA1E8B2B,KAAO,IAADC,EAClC,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACX,iBAAEC,IAAqBC,EAAAA,EAAAA,KACvBC,EAA4B,QAAjBP,EAAGG,EAASK,aAAK,IAAAR,OAAA,EAAdA,EAAgBO,aAE7BjD,EAAUmD,IAAe3C,EAAAA,EAAAA,UAAS,CACvCa,cAAe,MAGVjB,EAAcgD,IAAmB5C,EAAAA,EAAAA,WAAS,IAC1C6C,EAAcC,IAAmB9C,EAAAA,EAAAA,UAAS,KAEjD+C,EAAAA,EAAAA,WAAU,KACR,GAAIN,EAAa,CAAC,IAADO,EACf,MAAMC,EAAoBR,EAAYS,cAAmC,QAAxBF,EAAIP,EAAYU,gBAAQ,IAAAH,OAAA,EAApBA,EAAsBI,KAAM,GACjFT,GAAWU,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRZ,GAAW,IACdS,YAAaD,IAEjB,GACC,CAACR,IA4BJ,OACExC,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAAAI,SAAA,EACFC,EAAAA,EAAAA,KAAC+C,EAAAA,EAAU,CAAChC,QAAQ,KAAKiC,cAAY,EAAAjD,SAClCmC,EAAc,oDAAc,iDAG/BxC,EAAAA,EAAAA,MAACuD,EAAAA,EAAK,CAACtC,GAAI,CAAEuC,EAAG,GAAInD,SAAA,EAClBC,EAAAA,EAAAA,KAACmD,EAAY,CACXlE,SAAUA,EACVC,SAnCckE,IACpB,MAAM,KAAEhD,EAAI,MAAEC,GAAU+C,EAAEC,OAC1BjB,EAAakB,IAAIR,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWQ,GAAI,IAAE,CAAClD,GAAOC,MAkCpClB,SA/BaxB,UACnB0E,GAAgB,GAChBE,EAAgB,IAChB,IACE,IAAIgB,EACW,OAAXrB,QAAW,IAAXA,GAAAA,EAAaW,IACfU,QAAevB,EAAiBnD,EAAAA,GAAgBqD,EAAYW,GAAI5D,GAChE2C,EAAS,eAET2B,QAAevB,EAAiBpD,EAAAA,GAAgBK,GAChD2C,EAAS,aAEb,CAAE,MAAOpB,GACP+B,GAAqB,OAAL/B,QAAK,IAALA,OAAK,EAALA,EAAOgD,UAAW,kEACpC,CAAC,QACCnB,GAAgB,EAClB,GAgBMjD,aAbaA,IAAMwC,EAAS,aAc5BvC,aAAcA,EACdC,YAAa4C,EAAc,eAAO,iBAEnCI,IACCtC,EAAAA,EAAAA,KAAC+C,EAAAA,EAAU,CAAC/B,MAAM,QAAQyC,GAAI,EAAE1D,SAC7BuC,U","sources":["actions/CallApi/CategoryFetch.js","components/CategoryPage/CategoryForm.js","components/CategoryPage/CategoryAddPage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { API_USER } from \"../../utilities/constant\";\r\nimport { handleApiResponse, handleApiError } from \"../../utilities/handlerApi\";\r\n\r\nexport const fetchCategories = async (auth) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.get(`${API_USER}/category`, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"カテゴリの取得に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const deleteCategories = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/category/delete`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(\r\n      response,\r\n      \"あるメニュー使用するからカテゴリの削除に失敗しました。\"\r\n    );\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const createCategory = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/category/create`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"メニューの作成に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const updateCategory = async (auth, menuId, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.put(\r\n      `${API_USER}/category/update/${menuId}`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"メニューの更新に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  TextField,\r\n  Button,\r\n} from \"@mui/material\";\r\n\r\nconst CategoryForm = ({\r\n  formData,\r\n  onChange,\r\n  onSubmit,\r\n  handleCancel,\r\n  isSubmitting,\r\n  submitLabel,\r\n}) => {\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const handleFormSubmit = () => {\r\n    let validationErrors = {};\r\n    if (!formData.category_name.trim()) validationErrors.name = \"カテゴリ名を空白のままにすることはできません\";\r\n    setErrors(validationErrors);\r\n\r\n    if (Object.keys(validationErrors).length === 0) {\r\n      onSubmit();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box component=\"form\" noValidate autoComplete=\"off\">\r\n      <TextField\r\n        fullWidth\r\n        label=\"Tên món\"\r\n        name=\"category_name\"\r\n        value={formData.category_name}\r\n        onChange={onChange}\r\n        margin=\"normal\"\r\n        error={!!errors.name}\r\n        helperText={errors.name || \" \"}\r\n      />\r\n      \r\n      <Box marginY={2} sx={{ display: \"flex\", gap: 1 }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleFormSubmit}\r\n          disabled={isSubmitting}\r\n          sx={{ textTransform: \"none\" }}\r\n        >\r\n          {submitLabel}\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleCancel}\r\n          sx={{ textTransform: \"none\" }}\r\n        >\r\n          キャンセル\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CategoryForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Box, Typography, Paper } from \"@mui/material\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport CategoryForm from \"./CategoryForm\";\r\nimport { createCategory, updateCategory } from \"../../actions/CallApi/CategoryFetch\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst CategoryAddOrEditPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { callApiWithToken } = useAuth();\r\n  const initialData = location.state?.initialData;\r\n\r\n  const [formData, setFormData] = useState({\r\n    category_name: \"\",\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\"); // <-- state lỗi\r\n\r\n  useEffect(() => {\r\n    if (initialData) {\r\n      const initialCategoryId = initialData.category_id || initialData.category?.id || \"\";\r\n      setFormData({\r\n        ...initialData,\r\n        category_id: initialCategoryId,\r\n      });\r\n    }\r\n  }, [initialData]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setIsSubmitting(true);\r\n    setErrorMessage(\"\");\r\n    try {\r\n      let result;\r\n      if (initialData?.id) {\r\n        result = await callApiWithToken(updateCategory, initialData.id, formData);\r\n        navigate(\"/category\");\r\n      } else {\r\n        result = await callApiWithToken(createCategory, formData);\r\n        navigate(\"/category\");\r\n      }\r\n    } catch (error) {\r\n      setErrorMessage(error?.message || \"API呼ぶとき発生される。\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => navigate(\"/category\");\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        {initialData ? \"✏️ カテゴリ変更\" : \"➕ カテゴリ追加\"}\r\n      </Typography>\r\n\r\n      <Paper sx={{ p: 3 }}>\r\n        <CategoryForm \r\n          formData={formData}\r\n          onChange={handleChange}\r\n          onSubmit={handleSubmit}\r\n          handleCancel={handleCancel}\r\n          isSubmitting={isSubmitting}\r\n          submitLabel={initialData ? \"変更\" : \"追加\"}\r\n        />\r\n        {errorMessage && (\r\n          <Typography color=\"error\" mt={2}>\r\n            {errorMessage}\r\n          </Typography>\r\n        )}\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CategoryAddOrEditPage;\r\n"],"names":["fetchCategories","async","access_token","token_type","auth","response","axios","get","concat","API_USER","headers","Authorization","handleApiResponse","err","handleApiError","deleteCategories","data","post","createCategory","updateCategory","menuId","put","_ref","formData","onChange","onSubmit","handleCancel","isSubmitting","submitLabel","errors","setErrors","useState","_jsxs","Box","component","noValidate","autoComplete","children","_jsx","TextField","fullWidth","label","name","value","category_name","margin","error","helperText","marginY","sx","display","gap","Button","variant","color","onClick","handleFormSubmit","validationErrors","trim","Object","keys","length","disabled","textTransform","CategoryAddOrEditPage","_location$state","navigate","useNavigate","location","useLocation","callApiWithToken","useAuth","initialData","state","setFormData","setIsSubmitting","errorMessage","setErrorMessage","useEffect","_initialData$category","initialCategoryId","category_id","category","id","_objectSpread","Typography","gutterBottom","Paper","p","CategoryForm","e","target","prev","result","message","mt"],"sourceRoot":""}