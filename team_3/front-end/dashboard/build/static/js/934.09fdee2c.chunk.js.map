{"version":3,"file":"static/js/934.09fdee2c.chunk.js","mappings":"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","sources":["actions/CallApi/UserFetch.js","components/User/UserTable.js","components/User/UserFillter.js","pages/admin/UserPage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { API_USER } from \"../../utilities/constant\";\r\nimport { handleApiResponse, handleApiError } from \"../../utilities/handlerApi\";\r\n\r\nexport const fetchUsers = async (auth) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.get(`${API_USER}/user-admin`, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"ユーザーの取得に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const createUsers = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/user-admin/create`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"ユーザーの作成に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const deleteUsers = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/user-admin/delete/${data.id}`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"ユーザーの削除に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};","import React, { useState } from \"react\";\r\nimport { DataGrid } from \"@mui/x-data-grid\";\r\nimport { Box, Button, Typography } from \"@mui/material\";\r\nimport { roleOptions } from \"../../utilities/constant\";\r\n\r\nconst UserTable = ({ users, loading, onDelete }) => {\r\n  const [pageSize, setPageSize] = useState(10);\r\n\r\n  const columns = [\r\n    { field: \"id\", headerName: \"ID\", width: 90 },\r\n    { field: \"name\", headerName: \"ユーザー名\", width: 200 },\r\n    { field: \"email\", headerName: \"メール\", width: 200 },\r\n    {\r\n      field: \"role_type\",\r\n      headerName: \"権限\",\r\n      width: 150,\r\n      renderCell: (params) => {\r\n        const currentRole = roleOptions.find(\r\n          (opt) => opt.value === params.row.role_type\r\n        );\r\n        return (\r\n          <Typography variant=\"body2\">\r\n            {currentRole ? currentRole.label : \"バイト\"}\r\n          </Typography>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      field: \"actions\",\r\n      headerName: \"操作\",\r\n      width: 160,\r\n      sortable: false,\r\n      filterable: false,\r\n      renderCell: (params) => {\r\n        if (params.row.role_type === 1) {\r\n          return (\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n            </Typography>\r\n          );\r\n        }\r\n\r\n        return (\r\n          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"error\"\r\n              size=\"small\"\r\n              onClick={() => onDelete(params.row.id)}\r\n            >\r\n              削除\r\n            </Button>\r\n          </Box>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ height: 650, width: \"100%\" }}>\r\n      <DataGrid\r\n        rows={users || []}\r\n        columns={columns}\r\n        pageSize={pageSize}\r\n        onPageSizeChange={(newPageSize) => setPageSize(newPageSize)}\r\n        rowsPerPageOptions={[10, 50, 100]}\r\n        pagination\r\n        loading={loading}\r\n        getRowId={(row) => row.id}\r\n        disableSelectionOnClick\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UserTable;\r\n","import React from \"react\";\r\nimport { Box, TextField, Button } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst UserFilter = ({ filterName, setFilterName }) => {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <Box sx={{ display: \"flex\", gap: 2, mb: 2, alignItems: \"center\" }}>\r\n      <Box sx={{ mb: 2, width: 300 }}>\r\n        <TextField\r\n          fullWidth\r\n          label=\"ユーザー名検索\"\r\n          value={filterName}\r\n          onChange={(e) => setFilterName(e.target.value)}\r\n          size=\"small\"\r\n        />\r\n      </Box>\r\n\r\n      <Box sx={{ flexGrow: 1 }} />\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => navigate(\"/user/form\")}\r\n        sx={{ textTransform: \"none\", boxShadow: 2 }}\r\n      >\r\n        ➕ 追加\r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UserFilter;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Typography, Box, Dialog, DialogTitle, DialogContent, DialogActions, Button } from \"@mui/material\";\r\nimport WarningAmberIcon from \"@mui/icons-material/WarningAmber\";\r\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\r\nimport { UserTable, UserFillter } from \"../../components/User\";\r\nimport { fetchUsers, deleteUsers } from \"../../actions/CallApi/UserFetch\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst UserPage = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [filterName, setFilterName] = useState(\"\");\r\n\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [deleteId, setDeleteId] = useState(null);\r\n\r\n  const [errorModalOpen, setErrorModalOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const { callApiWithToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await callApiWithToken(fetchUsers);\r\n        setUsers(data || []);\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch users\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, [callApiWithToken]);\r\n\r\n  const handleOpenConfirm = (id) => {\r\n    setDeleteId(id);\r\n    setConfirmModalOpen(true);\r\n  };\r\n\r\n  const handleConfirmDelete = async () => {\r\n    if (!deleteId) return;\r\n    try {\r\n      setLoading(true);\r\n      await callApiWithToken(deleteUsers, { id: deleteId });\r\n      setUsers((prev) => prev.filter((user) => user.id !== deleteId));\r\n      setConfirmModalOpen(false);\r\n      setDeleteId(null);\r\n    } catch (error) {\r\n      setErrorMessage(error?.message || \"削除の失敗\");\r\n      setErrorModalOpen(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter users by name\r\n  const filteredUsers = users.filter((user) =>\r\n    user.name.toLowerCase().includes(filterName.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        ユーザー\r\n      </Typography>\r\n\r\n      <UserFillter filterName={filterName} setFilterName={setFilterName} />\r\n\r\n      <UserTable\r\n        users={filteredUsers}\r\n        loading={loading}\r\n        onDelete={handleOpenConfirm}\r\n      />\r\n\r\n      {/* Confirm Delete Dialog */}\r\n      <Dialog\r\n        open={confirmModalOpen}\r\n        onClose={() => setConfirmModalOpen(false)}\r\n      >\r\n        <DialogTitle sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n          <WarningAmberIcon color=\"warning\" />\r\n          確認\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography>ユーザーの件削除しますか？</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setConfirmModalOpen(false)}>キャンセル</Button>\r\n          <Button\r\n            onClick={handleConfirmDelete}\r\n            color=\"error\"\r\n            variant=\"contained\"\r\n            disabled={loading}\r\n          >\r\n            削除\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Error Dialog */}\r\n      <Dialog\r\n        open={errorModalOpen}\r\n        onClose={() => setErrorModalOpen(false)}\r\n      >\r\n        <DialogTitle sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n          <ErrorOutlineIcon color=\"error\" />\r\n          削除エラー\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography color=\"error\">{errorMessage}</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setErrorModalOpen(false)} color=\"primary\">\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n"],"names":["fetchUsers","async","access_token","token_type","auth","response","axios","get","concat","API_USER","headers","Authorization","handleApiResponse","err","handleApiError","createUsers","data","post","deleteUsers","id","_ref","users","loading","onDelete","pageSize","setPageSize","useState","columns","field","headerName","width","renderCell","params","currentRole","roleOptions","find","opt","value","row","role_type","_jsx","Typography","variant","children","label","sortable","filterable","color","Box","sx","display","gap","Button","size","onClick","height","DataGrid","rows","onPageSizeChange","newPageSize","rowsPerPageOptions","pagination","getRowId","disableSelectionOnClick","filterName","setFilterName","navigate","useNavigate","_jsxs","mb","alignItems","TextField","fullWidth","onChange","e","target","flexGrow","textTransform","boxShadow","UserPage","setUsers","setLoading","confirmModalOpen","setConfirmModalOpen","deleteId","setDeleteId","errorModalOpen","setErrorModalOpen","errorMessage","setErrorMessage","callApiWithToken","useAuth","useEffect","console","error","filteredUsers","filter","user","name","toLowerCase","includes","p","gutterBottom","UserFillter","UserTable","Dialog","open","onClose","DialogTitle","WarningAmberIcon","DialogContent","DialogActions","prev","message","disabled","ErrorOutlineIcon"],"sourceRoot":""}