"use strict";(self.webpackChunkadmin_client=self.webpackChunkadmin_client||[]).push([[123],{3060:(e,t,a)=>{a.d(t,{Fs:()=>c,VD:()=>s,YA:()=>r,ob:()=>d,sF:()=>l});var n=a(9722),o=a(6943),i=a(1759);const r=async()=>{try{const e=await n.A.get("".concat(o.B5,"/schedule"));return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(e){(0,i.h)(e)}},l=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/create"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(l){(0,i.h)(l)}},c=async(e,t,a)=>{const{access_token:r,token_type:l}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/update/").concat(t),a,{headers:{Authorization:"".concat(l," ").concat(r)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,i.h)(c)}},s=async(e,t)=>{const{access_token:a,token_type:r}=e;console.log(t);try{const e=await n.A.post("".concat(o.B5,"/schedule/delete"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(l){(0,i.h)(l)}},d=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/update"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(l){(0,i.h)(l)}}},6123:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(5043),o=a(6446),i=a(5865),r=a(35),l=a(6600),c=a(5316),s=a(9347),d=a(1906),h=a(7948),u=a(6559),x=a(3060),m=a(7784),f=a(3216),g=a(8729),p=a(6943),A=a(579);const y=e=>{let{filterDate:t,setFilterDate:a,onReset:n,selectionModel:i=[],onDeleteSelected:r,onEdit:l}=e;const c=(0,f.Zp)(),{user:s}=(0,g.A)(),h=(null===s||void 0===s?void 0:s.role_type)===p.G1;return(0,A.jsxs)(o.A,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[(0,A.jsx)(m.A,{label:"\u65e5\u4ed8",type:"date",value:t,onChange:e=>a(e.target.value),InputLabelProps:{shrink:!0},size:"small"}),(0,A.jsx)(d.A,{variant:"outlined",onClick:n,children:"Reset Filter"}),(0,A.jsx)(o.A,{sx:{flexGrow:1}}),(0,A.jsxs)(d.A,{variant:"contained",color:"error",disabled:h||0===i.length,onClick:r,sx:{textTransform:"none",boxShadow:2,opacity:h||0===i.length?.4:1,cursor:h?"not-allowed":"pointer"},children:["\ud83d\uddd1\ufe0f \u524a\u9664\uff08",i.length,"\uff09"]}),(0,A.jsx)(d.A,{variant:"contained",color:"info",disabled:h||1!==i.length,onClick:()=>l(c),sx:{textTransform:"none",boxShadow:2,opacity:h||1!==i.length?.4:1,cursor:h?"not-allowed":"pointer"},children:"\u270f\ufe0f \u5909\u66f4"}),(0,A.jsx)(d.A,{variant:"contained",color:"primary",disabled:h,onClick:()=>c("/schedule/form"),sx:{textTransform:"none",boxShadow:2,opacity:h?.4:1,cursor:h?"not-allowed":"pointer"},children:"\u2795 \u8ffd\u52a0"})]})};var w=a(5456);const j=e=>{let{schedules:t,loading:a,selectionModel:i,setSelectionModel:r}=e;const[l,c]=(0,n.useState)(10);return(0,A.jsx)(o.A,{sx:{height:650,width:"100%"},children:(0,A.jsx)(w.z,{rows:t||[],columns:[{field:"id",headerName:"\u5f93\u696d\u54e1\u756a\u53f7",width:90,valueGetter:e=>{var t;return(null===(t=e.row.user)||void 0===t?void 0:t.id)||""}},{field:"name",headerName:"\u540d\u524d",width:150,valueGetter:e=>{var t;return(null===(t=e.row.user)||void 0===t?void 0:t.name)||""}},{field:"target_date",headerName:"\u65e5\u4ed8",width:150},{field:"start_time",headerName:"\u51fa\u52e4",width:200},{field:"end_time",headerName:"\u9000\u52e4",width:200},{field:"position",headerName:"\u4f4d\u7f6e",width:100},{field:"actual_start_time",headerName:"\u5b9f\u969b\u306e\u51fa\u52e4",width:200},{field:"actual_end_time",headerName:"\u5b9f\u969b\u306e\u9000\u52e4",width:200},{field:"from_break_time",headerName:"\u4f11\u61a9\u304b\u3089",width:200},{field:"to_break_time",headerName:"\u4f11\u61a9\u307e\u3067",width:200},{field:"create_by",headerName:"\u4f5c\u6210\u8005",width:200},{field:"create_time",headerName:"\u4f5c\u6210\u65e5\u4ed8",width:150,valueGetter:e=>{var t;return null===(t=e.row.create_time)||void 0===t?void 0:t.slice(0,10)}}],pageSize:l,onPageSizeChange:e=>c(e),rowsPerPageOptions:[10,50,100],pagination:!0,loading:a,getRowId:e=>e.id,checkboxSelection:!0,disableSelectionOnClick:!0,selectionModel:i,onSelectionModelChange:e=>{r(e)}})})},v=()=>{const[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)(""),[f,p]=(0,n.useState)(!1),[w,v]=(0,n.useState)([]),[_,k]=(0,n.useState)(!1),[b,S]=(0,n.useState)(""),[C,N]=(0,n.useState)(!1),{callApiWithToken:D}=(0,g.A)();(0,n.useEffect)(()=>{(async()=>{p(!0);try{t(await(0,x.YA)())}catch(e){console.error("fetching error",e)}finally{p(!1)}})()},[]);const z=e.filter(e=>!a||e.target_date.startsWith(a));return(0,A.jsxs)(o.A,{children:[(0,A.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:"\u30b7\u30d5\u30c8\u4e00\u89a7"}),(0,A.jsx)(y,{filterDate:a,setFilterDate:m,onReset:()=>m(""),selectionModel:w,onDeleteSelected:()=>{0!==w.length&&N(!0)},onEdit:t=>{if(1===w.length){t("form",{state:{initialData:e.find(e=>e.id===w[0])}})}}}),(0,A.jsx)(j,{schedules:z,loading:f,selectionModel:w,setSelectionModel:v}),(0,A.jsxs)(r.A,{open:C,onClose:()=>N(!1),"aria-labelledby":"confirm-dialog-title",children:[(0,A.jsxs)(l.A,{id:"confirm-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,A.jsx)(u.A,{color:"warning"}),"\u78ba\u8a8d"]}),(0,A.jsx)(c.A,{children:(0,A.jsxs)(i.A,{children:[w.length," \u4ef6\u306e\u30e1\u30cb\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"]})}),(0,A.jsxs)(s.A,{children:[(0,A.jsx)(d.A,{onClick:()=>N(!1),color:"inherit",children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),(0,A.jsx)(d.A,{onClick:async()=>{try{p(!0),await D(x.VD,{ids:w}),t(e=>e.filter(e=>!w.includes(e.id))),v([]),N(!1)}catch(e){S((null===e||void 0===e?void 0:e.message)||"\u524a\u9664\u306e\u5931\u6557"),k(!0)}finally{p(!1)}},color:"error",variant:"contained",disabled:f,children:"\u524a\u9664"})]})]}),(0,A.jsxs)(r.A,{open:_,onClose:()=>k(!1),"aria-labelledby":"error-dialog-title",children:[(0,A.jsxs)(l.A,{id:"error-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,A.jsx)(h.A,{color:"error"}),"\u524a\u9664\u30a8\u30e9\u30fc"]}),(0,A.jsx)(c.A,{children:(0,A.jsx)(i.A,{color:"error",children:b})}),(0,A.jsx)(s.A,{children:(0,A.jsx)(d.A,{onClick:()=>k(!1),color:"primary",autoFocus:!0,children:"OK"})})]})]})}}}]);
//# sourceMappingURL=123.b2c1aea2.chunk.js.map