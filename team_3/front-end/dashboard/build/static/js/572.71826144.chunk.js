"use strict";(self.webpackChunkadmin_client=self.webpackChunkadmin_client||[]).push([[572],{3060:(e,t,n)=>{n.d(t,{Fs:()=>i,VD:()=>l,YA:()=>c,ob:()=>d,sF:()=>r});var o=n(9722),a=n(6943),s=n(1759);const c=async()=>{try{const e=await o.A.get("".concat(a.B5,"/schedule"));return(0,s.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(e){(0,s.h)(e)}},r=async(e,t)=>{const{access_token:n,token_type:c}=e;try{const e=await o.A.post("".concat(a.B5,"/schedule/create"),t,{headers:{Authorization:"".concat(c," ").concat(n)}});return(0,s.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,s.h)(r)}},i=async(e,t,n)=>{const{access_token:c,token_type:r}=e;try{const e=await o.A.post("".concat(a.B5,"/schedule/update/").concat(t),n,{headers:{Authorization:"".concat(r," ").concat(c)}});return(0,s.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(i){(0,s.h)(i)}},l=async(e,t)=>{const{access_token:n,token_type:c}=e;console.log(t);try{const e=await o.A.post("".concat(a.B5,"/schedule/delete"),t,{headers:{Authorization:"".concat(c," ").concat(n)}});return(0,s.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,s.h)(r)}},d=async(e,t)=>{const{access_token:n,token_type:c}=e;try{const e=await o.A.post("".concat(a.B5,"/schedule/update"),t,{headers:{Authorization:"".concat(c," ").concat(n)}});return(0,s.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,s.h)(r)}}},4572:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var o=n(5043),a=n(6446),s=n(7784),c=n(1906),r=n(5865),i=n(8729),l=n(3060),d=n(579);const u=()=>{const[e,t]=(0,o.useState)((new Date).toISOString().split("T")[0]),[n,u]=(0,o.useState)(""),[h,p]=(0,o.useState)(!1),[y,x]=(0,o.useState)(""),[f,b]=(0,o.useState)(null),k=(0,o.useRef)(null),{callApiWithToken:A}=(0,i.A)();(0,o.useEffect)(()=>{k.current&&k.current.focus()},[]);const m=async t=>{if(n&&e){p(!0),x(""),b(t);try{const o=await A(l.ob,{user_id:Number(n),target_date:e,type:t});x(o.message||"\u5b8c\u6210")}catch(o){x(o.message||"Error")}finally{p(!1),setTimeout(()=>b(null),200)}}else x("\u30e6\u30fc\u30b6\u30fcID\u3068\u65e5\u4ed8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")},v=e=>{"F1"===e.key&&m(1),"F2"===e.key&&m(2),"F3"===e.key&&m(3)};return(0,o.useEffect)(()=>(window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)),[]),(0,o.useEffect)(()=>{if(y){const e=setTimeout(()=>x(""),3e3);return()=>clearTimeout(e)}},[y]),(0,d.jsxs)(a.A,{sx:{p:3,display:"flex",flexDirection:"column",gap:2,width:350,border:"1px solid #ddd",borderRadius:2,backgroundColor:"#f9f9f9"},children:[(0,d.jsx)(s.A,{label:"\u65e5\u4ed8",type:"date",value:e,onChange:e=>t(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0}),(0,d.jsx)(s.A,{label:"\u30e6\u30fc\u30b6\u30fcID",type:"number",value:n,onChange:e=>u(e.target.value),inputProps:{min:1},fullWidth:!0,inputRef:k}),(0,d.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,d.jsxs)(c.A,{variant:"contained",color:"primary",onClick:()=>m(1),disabled:h,sx:{flex:1,position:"relative",border:1===f?"2px solid #000":"none"},children:["\u51fa\u52e4",(0,d.jsx)(r.A,{variant:"caption",sx:{position:"absolute",bottom:4,right:4},children:"F1"})]}),(0,d.jsxs)(c.A,{variant:"contained",color:"secondary",onClick:()=>m(2),disabled:h,sx:{flex:1,position:"relative",border:2===f?"2px solid #000":"none"},children:["\u4f11\u61a9",(0,d.jsx)(r.A,{variant:"caption",sx:{position:"absolute",bottom:4,right:4},children:"F2"})]}),(0,d.jsxs)(c.A,{variant:"contained",color:"error",onClick:()=>m(3),disabled:h,sx:{flex:1,position:"relative",border:3===f?"2px solid #000":"none"},children:["\u9000\u52e4",(0,d.jsx)(r.A,{variant:"caption",sx:{position:"absolute",bottom:4,right:4},children:"F3"})]})]}),y&&(0,d.jsx)(r.A,{color:y.includes("Error")?"error":"primary",sx:{mt:1},children:y})]})}}}]);
//# sourceMappingURL=572.71826144.chunk.js.map