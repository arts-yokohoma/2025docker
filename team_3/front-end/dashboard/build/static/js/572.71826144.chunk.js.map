{"version":3,"file":"static/js/572.71826144.chunk.js","mappings":"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","sources":["actions/CallApi/ScheduleFetch.js","pages/admin/ScheduleCheckInOutPage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { API_USER } from \"../../utilities/constant\";\r\nimport { handleApiResponse, handleApiError } from \"../../utilities/handlerApi\";\r\n\r\nexport const fetchSchedule = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_USER}/schedule`);\r\n    return handleApiResponse(response, \"メニューの取得に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const createSchedule = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/schedule/create`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"メニューの作成に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const updateSchedule = async (auth, menuId, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(\r\n      `${API_USER}/schedule/update/${menuId}`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"メニューの更新に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const deleteSchedule = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  console.log(data);\r\n  \r\n  try {\r\n    const response = await axios.post(`${API_USER}/schedule/delete`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"メニューの削除に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\n\r\nexport const updateScheduleCheckInOut = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(\r\n      `${API_USER}/schedule/update`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"メニューの更新に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Box, TextField, Button, Typography } from \"@mui/material\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { updateScheduleCheckInOut } from \"../../actions/CallApi/ScheduleFetch\";\r\n\r\nconst ScheduleActionPanel = () => {\r\n  const [targetDate, setTargetDate] = useState(\r\n    new Date().toISOString().split(\"T\")[0]\r\n  );\r\n  const [userId, setUserId] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [activeButton, setActiveButton] = useState(null);\r\n  const userIdRef = useRef(null);\r\n  const { callApiWithToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (userIdRef.current) userIdRef.current.focus();\r\n  }, []);\r\n\r\n  const handleAction = async (type) => {\r\n    if (!userId || !targetDate) {\r\n      setMessage(\"ユーザーIDと日付を入力してください\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    setActiveButton(type);\r\n    try {\r\n      const result = await callApiWithToken(updateScheduleCheckInOut, {\r\n        user_id: Number(userId),\r\n        target_date: targetDate,\r\n        type,\r\n      });\r\n      setMessage(result.message || \"完成\");\r\n    } catch (err) {\r\n      setMessage(err.message || \"Error\");\r\n    } finally {\r\n      setLoading(false);\r\n      setTimeout(() => setActiveButton(null), 200);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"F1\") handleAction(1);\r\n    if (e.key === \"F2\") handleAction(2);\r\n    if (e.key === \"F3\") handleAction(3);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", handleKeyPress);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyPress);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (message) {\r\n      const timer = setTimeout(() => setMessage(\"\"), 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message]);\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        p: 3,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: 2,\r\n        width: 350,\r\n        border: \"1px solid #ddd\",\r\n        borderRadius: 2,\r\n        backgroundColor: \"#f9f9f9\",\r\n      }}\r\n    >\r\n      {/* Date picker */}\r\n      <TextField\r\n        label=\"日付\"\r\n        type=\"date\"\r\n        value={targetDate}\r\n        onChange={(e) => setTargetDate(e.target.value)}\r\n        InputLabelProps={{ shrink: true }}\r\n        fullWidth\r\n      />\r\n\r\n      {/* User ID */}\r\n      <TextField\r\n        label=\"ユーザーID\"\r\n        type=\"number\"\r\n        value={userId}\r\n        onChange={(e) => setUserId(e.target.value)}\r\n        inputProps={{ min: 1 }}\r\n        fullWidth\r\n        inputRef={userIdRef}\r\n      />\r\n\r\n      {/* Action buttons */}\r\n      <Box sx={{ display: \"flex\", gap: 1 }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => handleAction(1)}\r\n          disabled={loading}\r\n          sx={{\r\n            flex: 1,\r\n            position: \"relative\",\r\n            border: activeButton === 1 ? \"2px solid #000\" : \"none\",\r\n          }}\r\n        >\r\n          出勤\r\n          <Typography\r\n            variant=\"caption\"\r\n            sx={{ position: \"absolute\", bottom: 4, right: 4 }}\r\n          >\r\n            F1\r\n          </Typography>\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={() => handleAction(2)}\r\n          disabled={loading}\r\n          sx={{\r\n            flex: 1,\r\n            position: \"relative\",\r\n            border: activeButton === 2 ? \"2px solid #000\" : \"none\",\r\n          }}\r\n        >\r\n          休憩\r\n          <Typography\r\n            variant=\"caption\"\r\n            sx={{ position: \"absolute\", bottom: 4, right: 4 }}\r\n          >\r\n            F2\r\n          </Typography>\r\n        </Button>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n          onClick={() => handleAction(3)}\r\n          disabled={loading}\r\n          sx={{\r\n            flex: 1,\r\n            position: \"relative\",\r\n            border: activeButton === 3 ? \"2px solid #000\" : \"none\",\r\n          }}\r\n        >\r\n          退勤\r\n          <Typography\r\n            variant=\"caption\"\r\n            sx={{ position: \"absolute\", bottom: 4, right: 4 }}\r\n          >\r\n            F3\r\n          </Typography>\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Message */}\r\n      {message && (\r\n        <Typography\r\n          color={message.includes(\"Error\") ? \"error\" : \"primary\"}\r\n          sx={{ mt: 1 }}\r\n        >\r\n          {message}\r\n        </Typography>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ScheduleActionPanel;\r\n"],"names":["fetchSchedule","async","response","axios","get","concat","API_USER","handleApiResponse","err","handleApiError","createSchedule","auth","data","access_token","token_type","post","headers","Authorization","updateSchedule","menuId","deleteSchedule","console","log","updateScheduleCheckInOut","ScheduleActionPanel","targetDate","setTargetDate","useState","Date","toISOString","split","userId","setUserId","loading","setLoading","message","setMessage","activeButton","setActiveButton","userIdRef","useRef","callApiWithToken","useAuth","useEffect","current","focus","handleAction","type","result","user_id","Number","target_date","setTimeout","handleKeyPress","e","key","window","addEventListener","removeEventListener","timer","clearTimeout","_jsxs","Box","sx","p","display","flexDirection","gap","width","border","borderRadius","backgroundColor","children","_jsx","TextField","label","value","onChange","target","InputLabelProps","shrink","fullWidth","inputProps","min","inputRef","Button","variant","color","onClick","disabled","flex","position","Typography","bottom","right","includes","mt"],"sourceRoot":""}