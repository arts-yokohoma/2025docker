"use strict";(self.webpackChunkadmin_client=self.webpackChunkadmin_client||[]).push([[901],{6901:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(5043),a=n(6446),i=n(5865),l=n(35),c=n(6600),s=n(5316),r=n(9347),d=n(1906),h=n(7948),x=n(6559),g=n(8663),u=n(7784),y=n(3216),A=n(579);const p=e=>{let{filterDate:t,setFilterDate:n,onReset:o,selectionModel:i=[],onDeleteSelected:l,onEdit:c}=e;const s=(0,y.Zp)();return(0,A.jsxs)(a.A,{sx:{display:"flex",gap:2,mb:2,alignItems:"center"},children:[(0,A.jsx)(u.A,{label:"\u65e5\u4ed8",type:"date",value:t,onChange:e=>n(e.target.value),InputLabelProps:{shrink:!0},size:"small"}),(0,A.jsx)(d.A,{variant:"outlined",onClick:o,children:"Reset Filter"}),(0,A.jsx)(a.A,{sx:{flexGrow:1}}),(0,A.jsxs)(d.A,{variant:"contained",color:"error",disabled:0===i.length,onClick:l,sx:{textTransform:"none",boxShadow:2,opacity:0===i.length?.5:1},children:["\ud83d\uddd1\ufe0f \u524a\u9664\uff08",i.length,"\uff09"]}),(0,A.jsx)(d.A,{variant:"contained",color:"info",disabled:1!==i.length,onClick:()=>c(s),sx:{textTransform:"none",boxShadow:2,opacity:1!==i.length?.5:1},children:"\u270f\ufe0f \u5909\u66f4"}),(0,A.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>s("/holiday/form"),sx:{textTransform:"none",boxShadow:2},children:"\u2795 \u8ffd\u52a0"})]})};var j=n(5456);const f=e=>{let{menus:t,loading:n,selectionModel:i,setSelectionModel:l}=e;const[c,s]=(0,o.useState)(10);return(0,A.jsx)(a.A,{sx:{height:650,width:"100%"},children:(0,A.jsx)(j.z,{rows:t||[],columns:[{field:"id",headerName:"ID",width:90},{field:"date",headerName:"\u65e5\u4ed8",width:200}],pageSize:c,onPageSizeChange:e=>s(e),rowsPerPageOptions:[10,50,100],pagination:!0,loading:n,getRowId:e=>e.id,checkboxSelection:!0,disableSelectionOnClick:!0,selectionModel:i,onSelectionModelChange:e=>{l(e)}})})};var m=n(8729);const k=()=>{const[e,t]=(0,o.useState)([]),[n,u]=(0,o.useState)(""),[y,j]=(0,o.useState)(!1),[k,S]=(0,o.useState)([]),[w,b]=(0,o.useState)(!1),[C,v]=(0,o.useState)(""),[_,D]=(0,o.useState)(!1),{callApiWithToken:M}=(0,m.A)();(0,o.useEffect)(()=>{(async()=>{j(!0);try{t(await(0,g.LX)())}catch(e){console.error("fetching error",e)}finally{j(!1)}})()},[]);const z=e.filter(e=>!n||e.create_time.startsWith(n));return(0,A.jsxs)(a.A,{children:[(0,A.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:"\u4f11\u65e5\u4e00\u89a7"}),(0,A.jsx)(p,{filterDate:n,setFilterDate:u,onReset:()=>u(""),selectionModel:k,onDeleteSelected:()=>{0!==k.length&&D(!0)},onEdit:t=>{if(1===k.length){t("form",{state:{initialData:e.find(e=>e.id===k[0])}})}}}),(0,A.jsx)(f,{menus:z,loading:y,selectionModel:k,setSelectionModel:S}),(0,A.jsxs)(l.A,{open:_,onClose:()=>D(!1),"aria-labelledby":"confirm-dialog-title",children:[(0,A.jsxs)(c.A,{id:"confirm-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,A.jsx)(x.A,{color:"warning"}),"\u78ba\u8a8d"]}),(0,A.jsx)(s.A,{children:(0,A.jsxs)(i.A,{children:[k.length," \u4ef6\u306e\u4f11\u65e5\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"]})}),(0,A.jsxs)(r.A,{children:[(0,A.jsx)(d.A,{onClick:()=>D(!1),color:"inherit",children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),(0,A.jsx)(d.A,{onClick:async()=>{try{j(!0),await M(g.g2,{ids:k}),t(e=>e.filter(e=>!k.includes(e.id))),S([]),D(!1)}catch(e){v((null===e||void 0===e?void 0:e.message)||"\u524a\u9664\u306e\u5931\u6557."),b(!0)}finally{j(!1)}},color:"error",variant:"contained",disabled:y,children:"\u524a\u9664"})]})]}),(0,A.jsxs)(l.A,{open:w,onClose:()=>b(!1),"aria-labelledby":"error-dialog-title",children:[(0,A.jsxs)(c.A,{id:"error-dialog-title",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,A.jsx)(h.A,{color:"error"}),"\u524a\u9664\u30a8\u30e9\u30fc"]}),(0,A.jsx)(s.A,{children:(0,A.jsx)(i.A,{color:"error",children:C})}),(0,A.jsx)(r.A,{children:(0,A.jsx)(d.A,{onClick:()=>b(!1),color:"primary",autoFocus:!0,children:"\u30aa\u30fc\u30b1\u30fc"})})]})]})}},8663:(e,t,n)=>{n.d(t,{LX:()=>l,g2:()=>r,qK:()=>s,tj:()=>c});var o=n(9722),a=n(6943),i=n(1759);const l=async()=>{try{const e=await o.A.get("".concat(a.B5,"/holiday"));return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(e){(0,i.h)(e)}},c=async(e,t)=>{const{access_token:n,token_type:l}=e;try{const e=await o.A.post("".concat(a.B5,"/holiday/create"),t,{headers:{Authorization:"".concat(l," ").concat(n)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,i.h)(c)}},s=async(e,t,n)=>{const{access_token:l,token_type:c}=e;try{const e=await o.A.put("".concat(a.B5,"/holiday/update/").concat(t),n,{headers:{Authorization:"".concat(c," ").concat(l)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}},r=async(e,t)=>{const{access_token:n,token_type:l}=e;try{const e=await o.A.post("".concat(a.B5,"/holiday/delete"),t,{headers:{Authorization:"".concat(l," ").concat(n)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,i.h)(c)}}}}]);
//# sourceMappingURL=901.2afb7795.chunk.js.map