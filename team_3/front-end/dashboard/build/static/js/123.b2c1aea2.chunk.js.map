{"version":3,"file":"static/js/123.b2c1aea2.chunk.js","mappings":"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","sources":["actions/CallApi/ScheduleFetch.js","components/SchedulePage/ScheduleFillter.js","components/SchedulePage/ScheduleTable.js","pages/admin/SchedulePage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { API_USER } from \"../../utilities/constant\";\r\nimport { handleApiResponse, handleApiError } from \"../../utilities/handlerApi\";\r\n\r\nexport const fetchSchedule = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_USER}/schedule`);\r\n    return handleApiResponse(response, \"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const createSchedule = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(`${API_USER}/schedule/create`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const updateSchedule = async (auth, menuId, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(\r\n      `${API_USER}/schedule/update/${menuId}`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const deleteSchedule = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  console.log(data);\r\n  \r\n  try {\r\n    const response = await axios.post(`${API_USER}/schedule/delete`, data, {\r\n      headers: {\r\n        Authorization: `${token_type} ${access_token}`,\r\n      },\r\n    });\r\n    return handleApiResponse(response, \"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\n\r\nexport const updateScheduleCheckInOut = async (auth, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(\r\n      `${API_USER}/schedule/update`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};","import React from \"react\";\r\nimport { Box, TextField, Button } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { ROLE_TYPE_CHECKIN } from \"../../utilities/constant\";\r\n\r\nconst ScheduleFilter = ({\r\n  filterDate,\r\n  setFilterDate,\r\n  onReset,\r\n  selectionModel = [],\r\n  onDeleteSelected,\r\n  onEdit,\r\n}) => {\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n\r\n  // âœ… check role\r\n  const isCheckInUser = user?.role_type === ROLE_TYPE_CHECKIN;\r\n\r\n  return (\r\n    <Box sx={{ display: \"flex\", gap: 2, mb: 2, alignItems: \"center\" }}>\r\n      <TextField\r\n        label=\"æ—¥ä»˜\"\r\n        type=\"date\"\r\n        value={filterDate}\r\n        onChange={(e) => setFilterDate(e.target.value)}\r\n        InputLabelProps={{ shrink: true }}\r\n        size=\"small\"\r\n      />\r\n\r\n      <Button variant=\"outlined\" onClick={onReset}>\r\n        Reset Filter\r\n      </Button>\r\n\r\n      <Box sx={{ flexGrow: 1 }} />\r\n\r\n      {/* ğŸ—‘ï¸ å‰Šé™¤ */}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"error\"\r\n        disabled={isCheckInUser || selectionModel.length === 0}\r\n        onClick={onDeleteSelected}\r\n        sx={{\r\n          textTransform: \"none\",\r\n          boxShadow: 2,\r\n          opacity: isCheckInUser || selectionModel.length === 0 ? 0.4 : 1,\r\n          cursor: isCheckInUser ? \"not-allowed\" : \"pointer\",\r\n        }}\r\n      >\r\n        ğŸ—‘ï¸ å‰Šé™¤ï¼ˆ{selectionModel.length}ï¼‰\r\n      </Button>\r\n\r\n      {/* âœï¸ å¤‰æ›´ */}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"info\"\r\n        disabled={isCheckInUser || selectionModel.length !== 1}\r\n        onClick={() => onEdit(navigate)}\r\n        sx={{\r\n          textTransform: \"none\",\r\n          boxShadow: 2,\r\n          opacity: isCheckInUser || selectionModel.length !== 1 ? 0.4 : 1,\r\n          cursor: isCheckInUser ? \"not-allowed\" : \"pointer\",\r\n        }}\r\n      >\r\n        âœï¸ å¤‰æ›´\r\n      </Button>\r\n\r\n      {/* â• è¿½åŠ  */}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        disabled={isCheckInUser}\r\n        onClick={() => navigate(\"/schedule/form\")}\r\n        sx={{\r\n          textTransform: \"none\",\r\n          boxShadow: 2,\r\n          opacity: isCheckInUser ? 0.4 : 1,\r\n          cursor: isCheckInUser ? \"not-allowed\" : \"pointer\",\r\n        }}\r\n      >\r\n        â• è¿½åŠ \r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ScheduleFilter;\r\n","import React, { useState } from \"react\";\r\nimport { DataGrid } from \"@mui/x-data-grid\";\r\nimport { Box } from \"@mui/material\";\r\n\r\nconst ScheduleTable = ({\r\n  schedules,\r\n  loading,\r\n  selectionModel,\r\n  setSelectionModel,\r\n}) => {\r\n  const [pageSize, setPageSize] = useState(10);\r\n\r\n  const columns = [\r\n    {\r\n      field: \"id\",\r\n      headerName: \"å¾“æ¥­å“¡ç•ªå·\",\r\n      width: 90,\r\n      valueGetter: (params) => params.row.user?.id || \"\",\r\n    },\r\n    {\r\n      field: \"name\",\r\n      headerName: \"åå‰\",\r\n      width: 150,\r\n      valueGetter: (params) => params.row.user?.name || \"\",\r\n    },\r\n    { field: \"target_date\", headerName: \"æ—¥ä»˜\", width: 150 },\r\n    { field: \"start_time\", headerName: \"å‡ºå‹¤\", width: 200 },\r\n    { field: \"end_time\", headerName: \"é€€å‹¤\", width: 200 },\r\n    { field: \"position\", headerName: \"ä½ç½®\", width: 100 },\r\n    { field: \"actual_start_time\", headerName: \"å®Ÿéš›ã®å‡ºå‹¤\", width: 200 },\r\n    { field: \"actual_end_time\", headerName: \"å®Ÿéš›ã®é€€å‹¤\", width:200 },\r\n    { field: \"from_break_time\", headerName: \"ä¼‘æ†©ã‹ã‚‰\", width: 200 },\r\n    { field: \"to_break_time\", headerName: \"ä¼‘æ†©ã¾ã§\", width: 200 },\r\n    { field: \"create_by\", headerName: \"ä½œæˆè€…\", width: 200 },\r\n    {\r\n      field: \"create_time\",\r\n      headerName: \"ä½œæˆæ—¥ä»˜\",\r\n      width: 150,\r\n      valueGetter: (params) => params.row.create_time?.slice(0, 10),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ height: 650, width: \"100%\" }}>\r\n      <DataGrid\r\n        rows={schedules || []}\r\n        columns={columns}\r\n        pageSize={pageSize}\r\n        onPageSizeChange={(newPageSize) => setPageSize(newPageSize)}\r\n        rowsPerPageOptions={[10, 50, 100]}\r\n        pagination\r\n        loading={loading}\r\n        getRowId={(row) => row.id}\r\n        checkboxSelection\r\n        disableSelectionOnClick\r\n        selectionModel={selectionModel}\r\n        onSelectionModelChange={(newSelection) => {\r\n          setSelectionModel(newSelection);\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ScheduleTable;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n} from \"@mui/material\";\r\nimport ErrorOutlineIcon from \"@mui/icons-material/ErrorOutline\";\r\nimport WarningAmberIcon from \"@mui/icons-material/WarningAmber\";\r\nimport { fetchSchedule, deleteSchedule } from \"../../actions/CallApi/ScheduleFetch\";\r\nimport ScheduleFilter from \"../../components/SchedulePage/ScheduleFillter\";\r\nimport ScheduleTable from \"../../components/SchedulePage/ScheduleTable\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst SchedulePage = () => {\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [filterDate, setFilterDate] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectionModel, setSelectionModel] = useState([]);\r\n  const [errorModalOpen, setErrorModalOpen] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const { callApiWithToken } = useAuth();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        setSchedules(await fetchSchedule());\r\n      } catch (err) {\r\n        console.error(\"fetching error\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n\r\n  const handleConfirmDelete = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await callApiWithToken(deleteSchedule, { ids: selectionModel });\r\n      setSchedules((prev) =>\r\n        prev.filter((item) => !selectionModel.includes(item.id))\r\n      );\r\n      setSelectionModel([]);\r\n      setConfirmModalOpen(false);\r\n    } catch (err) {\r\n      setErrorMessage(err?.message || \"å‰Šé™¤ã®å¤±æ•—\");\r\n      setErrorModalOpen(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteSelected = () => {\r\n    if (selectionModel.length === 0) return;\r\n    setConfirmModalOpen(true);\r\n  };\r\n\r\n  const handleEdit = (navigate) => {\r\n    if (selectionModel.length === 1) {\r\n      const selectedItem = schedules.find((m) => m.id === selectionModel[0]);\r\n      navigate(\"form\", { state: { initialData: selectedItem } });\r\n    }\r\n  };\r\n\r\n  const filteredSchedule = schedules.filter((item) => {\r\n    const matchDate = filterDate\r\n      ? item.target_date.startsWith(filterDate)\r\n      : true;\r\n    return matchDate;\r\n  });\r\n\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        ã‚·ãƒ•ãƒˆä¸€è¦§\r\n      </Typography>\r\n\r\n      <ScheduleFilter\r\n        filterDate={filterDate}\r\n        setFilterDate={setFilterDate}\r\n        onReset={() => setFilterDate(\"\")}\r\n        selectionModel={selectionModel}\r\n        onDeleteSelected={handleDeleteSelected}\r\n        onEdit={handleEdit}\r\n      />\r\n\r\n      <ScheduleTable\r\n        schedules={filteredSchedule}\r\n        loading={loading}\r\n        selectionModel={selectionModel}\r\n        setSelectionModel={setSelectionModel}\r\n      />\r\n\r\n      <Dialog\r\n        open={confirmModalOpen}\r\n        onClose={() => setConfirmModalOpen(false)}\r\n        aria-labelledby=\"confirm-dialog-title\"\r\n      >\r\n        <DialogTitle\r\n          id=\"confirm-dialog-title\"\r\n          sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}\r\n        >\r\n          <WarningAmberIcon color=\"warning\" />\r\n          ç¢ºèª\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            {selectionModel.length} ä»¶ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setConfirmModalOpen(false)} color=\"inherit\">\r\n            ã‚­ãƒ£ãƒ³ã‚»ãƒ«\r\n          </Button>\r\n          <Button\r\n            onClick={handleConfirmDelete}\r\n            color=\"error\"\r\n            variant=\"contained\"\r\n            disabled={loading}\r\n          >\r\n            å‰Šé™¤\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <Dialog\r\n        open={errorModalOpen}\r\n        onClose={() => setErrorModalOpen(false)}\r\n        aria-labelledby=\"error-dialog-title\"\r\n      >\r\n        <DialogTitle\r\n          id=\"error-dialog-title\"\r\n          sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}\r\n        >\r\n          <ErrorOutlineIcon color=\"error\" />\r\n          å‰Šé™¤ã‚¨ãƒ©ãƒ¼\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography color=\"error\">{errorMessage}</Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => setErrorModalOpen(false)}\r\n            color=\"primary\"\r\n            autoFocus\r\n          >\r\n            OK\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SchedulePage;\r\n"],"names":["fetchSchedule","async","response","axios","get","concat","API_USER","handleApiResponse","err","handleApiError","createSchedule","auth","data","access_token","token_type","post","headers","Authorization","updateSchedule","menuId","deleteSchedule","console","log","updateScheduleCheckInOut","_ref","filterDate","setFilterDate","onReset","selectionModel","onDeleteSelected","onEdit","navigate","useNavigate","user","useAuth","isCheckInUser","role_type","ROLE_TYPE_CHECKIN","_jsxs","Box","sx","display","gap","mb","alignItems","children","_jsx","TextField","label","type","value","onChange","e","target","InputLabelProps","shrink","size","Button","variant","onClick","flexGrow","color","disabled","length","textTransform","boxShadow","opacity","cursor","schedules","loading","setSelectionModel","pageSize","setPageSize","useState","height","width","DataGrid","rows","columns","field","headerName","valueGetter","params","_params$row$user","row","id","_params$row$user2","name","_params$row$create_ti","create_time","slice","onPageSizeChange","newPageSize","rowsPerPageOptions","pagination","getRowId","checkboxSelection","disableSelectionOnClick","onSelectionModelChange","newSelection","SchedulePage","setSchedules","setLoading","errorModalOpen","setErrorModalOpen","errorMessage","setErrorMessage","confirmModalOpen","setConfirmModalOpen","callApiWithToken","useEffect","error","filteredSchedule","filter","item","target_date","startsWith","Typography","gutterBottom","ScheduleFilter","handleDeleteSelected","state","initialData","find","m","ScheduleTable","Dialog","open","onClose","DialogTitle","WarningAmberIcon","DialogContent","DialogActions","ids","prev","includes","message","ErrorOutlineIcon","autoFocus"],"sourceRoot":""}