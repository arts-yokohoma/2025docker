"use strict";(self.webpackChunkadmin_client=self.webpackChunkadmin_client||[]).push([[533],{386:(e,t,a)=>{a.d(t,{Kh:()=>c,by:()=>s,hU:()=>r});var n=a(9722),o=a(6943),i=a(1759);const r=async e=>{const{access_token:t,token_type:a}=e;try{const e=await n.A.get("".concat(o.B5,"/user-admin"),{headers:{Authorization:"".concat(a," ").concat(t)}});return(0,i.y)(e,"\u30e6\u30fc\u30b6\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(r){(0,i.h)(r)}},s=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/user-admin/create"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}},c=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/user-admin/delete/").concat(t.id),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e6\u30fc\u30b6\u30fc\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}}},3060:(e,t,a)=>{a.d(t,{Fs:()=>c,VD:()=>l,YA:()=>r,ob:()=>d,sF:()=>s});var n=a(9722),o=a(6943),i=a(1759);const r=async()=>{try{const e=await n.A.get("".concat(o.B5,"/schedule"));return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(e){(0,i.h)(e)}},s=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/create"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}},c=async(e,t,a)=>{const{access_token:r,token_type:s}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/update/").concat(t),a,{headers:{Authorization:"".concat(s," ").concat(r)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(c){(0,i.h)(c)}},l=async(e,t)=>{const{access_token:a,token_type:r}=e;console.log(t);try{const e=await n.A.post("".concat(o.B5,"/schedule/delete"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}},d=async(e,t)=>{const{access_token:a,token_type:r}=e;try{const e=await n.A.post("".concat(o.B5,"/schedule/update"),t,{headers:{Authorization:"".concat(r," ").concat(a)}});return(0,i.y)(e,"\u30e1\u30cb\u30e5\u30fc\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}catch(s){(0,i.h)(s)}}},6990:(e,t,a)=>{a.d(t,{A:()=>w});var n=a(8587),o=a(8168),i=a(5043),r=a(8387),s=a(8610),c=a(7266),l=a(4535),d=a(1475),u=a(6431),m=a(1347),p=a(6236),h=a(5013),_=a(5849),b=a(2532);const g=(0,b.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const y=(0,b.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var v=a(909),A=a(2372);function f(e){return(0,A.Ay)("MuiMenuItem",e)}const x=(0,b.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var k=a(579);const C=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],j=(0,l.Ay)(p.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:a}=e;return(0,o.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(x.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(x.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(x.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(x.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(x.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(g.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(g.inset)]:{marginLeft:52},["& .".concat(v.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(v.A.inset)]:{paddingLeft:36},["& .".concat(y.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,o.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(y.root," svg")]:{fontSize:"1.25rem"}}))}),w=i.forwardRef(function(e,t){const a=(0,u.b)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:l="li",dense:d=!1,divider:p=!1,disableGutters:b=!1,focusVisibleClassName:g,role:y="menuitem",tabIndex:v,className:A}=a,x=(0,n.A)(a,C),w=i.useContext(m.A),I=i.useMemo(()=>({dense:d||w.dense||!1,disableGutters:b}),[w.dense,d,b]),S=i.useRef(null);(0,h.A)(()=>{c&&S.current&&S.current.focus()},[c]);const B=(0,o.A)({},a,{dense:I.dense,divider:p,disableGutters:b}),L=(e=>{const{disabled:t,dense:a,divider:n,disableGutters:i,selected:r,classes:c}=e,l={root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",r&&"selected"]},d=(0,s.A)(l,f,c);return(0,o.A)({},c,d)})(a),O=(0,_.A)(S,t);let W;return a.disabled||(W=void 0!==v?v:-1),(0,k.jsx)(m.A.Provider,{value:I,children:(0,k.jsx)(j,(0,o.A)({ref:O,role:y,tabIndex:W,component:l,focusVisibleClassName:(0,r.A)(L.focusVisible,g),className:(0,r.A)(L.root,A)},x,{ownerState:B,classes:L}))})})},9533:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var n=a(9379),o=a(5043),i=a(6446),r=a(5865),s=a(3336),c=a(3216),l=a(3193),d=a(9190),u=a(4225),m=a(6990),p=a(1673),h=a(7784),_=a(1906),b=a(8729),g=a(386),y=a(6943),v=a(579);const A=e=>{let{formData:t,onChange:a,onSubmit:n,handleCancel:r,isSubmitting:s,submitLabel:c}=e;const[A,f]=(0,o.useState)([]),{callApiWithToken:x}=(0,b.A)(),[k,C]=(0,o.useState)({});(0,o.useEffect)(()=>{(async()=>{try{const e=await x(g.hU);f(e)}catch(e){console.error("Error fetching users",e)}})()},[x]);const j=e=>e?19==e.length?e:e+":00":null;return(0,v.jsxs)(i.A,{component:"form",noValidate:!0,autoComplete:"off",children:[(0,v.jsxs)(l.A,{fullWidth:!0,margin:"normal",error:!!k.user_id,children:[(0,v.jsx)(d.A,{id:"user-select-label",children:"\u540d\u524d"}),(0,v.jsx)(u.A,{labelId:"user-select-label",name:"user_id",value:t.user_id||"",onChange:e=>a({target:{name:"user_id",value:e.target.value}}),children:A.map(e=>(0,v.jsx)(m.A,{value:e.id,children:e.name},e.id))}),k.user_id&&(0,v.jsx)(p.A,{children:k.user_id})]}),(0,v.jsx)(h.A,{label:"\u51fa\u52e4\u65e5\u4ed8",type:"date",name:"target_date",value:t.target_date||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},error:!!k.target_date,helperText:k.target_date}),(0,v.jsx)(h.A,{label:"\u51fa\u52e4\u6642\u9593",type:"datetime-local",name:"start_time",value:t.start_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},error:!!k.start_time,helperText:k.start_time}),(0,v.jsx)(h.A,{label:"\u9000\u52e4\u6642\u9593",type:"datetime-local",name:"end_time",value:t.end_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},error:!!k.end_time,helperText:k.end_time}),(0,v.jsx)(h.A,{label:"\u4f11\u61a9\u6642\u9593\u304b\u3089",type:"datetime-local",name:"from_break_time",value:t.from_break_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),(0,v.jsx)(h.A,{label:"\u4f11\u61a9\u6642\u9593\u307e\u3067",type:"datetime-local",name:"to_break_time",value:t.to_break_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),(0,v.jsx)(h.A,{label:"\u5b9f\u969b\u51fa\u52e4",type:"datetime-local",name:"actual_start_time",value:t.actual_start_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),(0,v.jsx)(h.A,{label:"\u5b9f\u969b\u9000\u52e4",type:"datetime-local",name:"actual_end_time",value:t.actual_end_time||"",onChange:a,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),(0,v.jsxs)(l.A,{fullWidth:!0,margin:"normal",error:!!k.position,children:[(0,v.jsx)(d.A,{id:"position-select-label",children:"\u4f4d\u7f6e"}),(0,v.jsxs)(u.A,{labelId:"position-select-label",name:"position",value:t.position||"",onChange:e=>a({target:{name:"position",value:e.target.value}}),children:[(0,v.jsx)(m.A,{value:"",children:"-- \u4f4d\u7f6e\u9078\u629e --"}),y.Xi.map(e=>(0,v.jsx)(m.A,{value:e,children:e},e))]}),k.position&&(0,v.jsx)(p.A,{children:k.position})]}),(0,v.jsxs)(i.A,{mt:2,sx:{display:"flex",gap:1},children:[(0,v.jsx)(_.A,{variant:"contained",color:"primary",onClick:()=>{if(!(()=>{const e={};return t.user_id||(e.user_id="\u30e6\u30fc\u30b6\u30fc\u306f\u5fc5\u9808\u3067\u3059"),t.target_date||(e.target_date="\u51fa\u52e4\u65e5\u4ed8\u306f\u5fc5\u9808\u3067\u3059"),t.start_time||(e.start_time="\u51fa\u52e4\u6642\u9593\u306f\u5fc5\u9808\u3067\u3059"),t.end_time||(e.end_time="\u9000\u52e4\u6642\u9593\u306f\u5fc5\u9808\u3067\u3059"),t.position||(e.position="\u4f4d\u7f6e\u306f\u5fc5\u9808\u3067\u3059"),C(e),0===Object.keys(e).length})())return;const e={user_id:t.user_id,target_date:(a=t.target_date,a||null),start_time:j(t.start_time),end_time:j(t.end_time),from_break_time:j(t.from_break_time),to_break_time:j(t.to_break_time),actual_start_time:j(t.actual_start_time),actual_end_time:j(t.actual_end_time),position:t.position};var a;n(e)},disabled:s,children:c}),(0,v.jsx)(_.A,{variant:"outlined",onClick:r,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})};var f=a(3060);const x=()=>{var e;const t=(0,c.Zp)(),a=(0,c.zy)(),{callApiWithToken:l}=(0,b.A)(),d=null===(e=a.state)||void 0===e?void 0:e.initialData,[u,m]=(0,o.useState)({user_id:"",target_date:"",start_time:"",end_time:"",from_break_time:"",to_break_time:"",position:"",actual_start_time:"",actual_end_time:""}),[p,h]=(0,o.useState)(!1),[_,g]=(0,o.useState)("");(0,o.useEffect)(()=>{d&&m(d)},[d]);return(0,v.jsxs)(i.A,{children:[(0,v.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:d?"\u270f\ufe0f \u5909\u66f4":"\u2795 \u8ffd\u52a0"}),(0,v.jsxs)(s.A,{sx:{p:3},children:[(0,v.jsx)(A,{formData:u,onChange:e=>{const{name:t,value:a}=e.target;m(e=>(0,n.A)((0,n.A)({},e),{},{[t]:a}))},onSubmit:async e=>{h(!0),g("");try{null!==d&&void 0!==d&&d.id?await l(f.Fs,d.id,e):await l(f.sF,e),t("/schedule")}catch(a){g((null===a||void 0===a?void 0:a.message)||"API\u547c\u3076\u3068\u304d\u30a8\u30fc\u30e9\u30fc\u767a\u751f")}finally{h(!1)}},handleCancel:()=>t("/schedule"),isSubmitting:p,submitLabel:d?"\u5909\u66f4":"\u8ffd\u52a0"}),_&&(0,v.jsx)(r.A,{color:"error",mt:2,children:_})]})]})}}}]);
//# sourceMappingURL=533.f823227e.chunk.js.map