{"version":3,"file":"static/js/71.db90461b.chunk.js","mappings":"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","sources":["actions/CallApi/OrderFetch.js","pages/HomePage.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { API_USER } from \"../../utilities/constant\";import { handleApiResponse, handleApiError } from \"../../utilities/handlerApi\";\r\n\r\n\r\nexport const fetchOrders = async (auth) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.get(`${API_USER}/order`,\r\n       {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"オーダーの取得に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\nexport const fetchRevenue = async (auth, year) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.get(`${API_USER}/order/revenue?year=${year}`,\r\n       {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"オーダーの取得に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n\r\n\r\nexport const updateOrderStatus = async (auth, id, data) => {\r\n  const { access_token, token_type } = auth;\r\n  try {\r\n    const response = await axios.post(\r\n      `${API_USER}/order/update/${id}`,\r\n      data,\r\n      {\r\n        headers: {\r\n          Authorization: `${token_type} ${access_token}`,\r\n        },\r\n      }\r\n    );\r\n    return handleApiResponse(response, \"オーダーの更新に失敗しました。\");\r\n  } catch (err) {\r\n    handleApiError(err);\r\n  }\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Box, Grid, Paper, Typography, FormControl, MenuItem, Select, CircularProgress } from \"@mui/material\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { fetchRevenue } from \"../actions/CallApi/OrderFetch.js\";\r\n\r\nconst HomePage = () => {\r\n  const { callApiWithToken } = useAuth();\r\n  const currentYear = new Date().getFullYear();\r\n\r\n  const [selectedYear, setSelectedYear] = useState(currentYear);\r\n  const [lineData, setLineData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const loadRevenue = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setErrorMsg(\"\");\r\n\r\n        const res = await callApiWithToken(fetchRevenue, selectedYear);\r\n        const json = typeof res?.json === \"function\" ? await res.json() : res;\r\n        const data = Array.isArray(json) ? json : json?.data;\r\n        if (!Array.isArray(data)) throw new Error(\"Invalid revenue response\");\r\n\r\n        const sorted = [...data].sort(\r\n          (a, b) => Number(a.month) - Number(b.month)\r\n        );\r\n        setLineData(sorted);\r\n      } catch (e) {\r\n        setErrorMsg(e?.message || \"Failed to load revenue\");\r\n        setLineData([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadRevenue();\r\n  }, [callApiWithToken, selectedYear]);\r\n  const yearOptions = Array.from({ length: 5 }, (_, i) => currentYear - i);\r\n  return (\r\n    <Box sx={{ padding: \"2rem\" }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        よこそう\r\n      </Typography>\r\n      <Typography variant=\"body1\" gutterBottom>\r\n        私たちはトリプルインパクト\r\n      </Typography>\r\n\r\n      <Grid container spacing={3} sx={{ marginTop: \"1rem\" }}>\r\n        <Grid item xs={12} md={6}>\r\n          <Paper sx={{ p: 2 }}>\r\n            <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2, mb: 1 }}>\r\n              <Typography variant=\"h6\">売上毎月</Typography>\r\n              <FormControl size=\"small\">\r\n                <Select\r\n                  value={selectedYear}\r\n                  onChange={(e) => setSelectedYear(e.target.value)}\r\n                >\r\n                  {yearOptions.map((y) => (\r\n                    <MenuItem key={y} value={y}>\r\n                      {y}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Box>\r\n            <Typography variant=\"body2\" gutterBottom>\r\n              単価：円\r\n            </Typography>\r\n\r\n            {loading ? (\r\n              <Box\r\n                sx={{\r\n                  height: 250,\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                <CircularProgress />\r\n              </Box>\r\n            ) : errorMsg ? (\r\n              <Typography color=\"error\">{errorMsg}</Typography>\r\n            ) : (\r\n              <ResponsiveContainer width=\"100%\" height={250}>\r\n                <LineChart data={lineData}>\r\n                  <XAxis dataKey=\"month\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Line type=\"monotone\" dataKey=\"priceTotal\" stroke=\"#8884d8\" />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            )}\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"names":["fetchOrders","async","access_token","token_type","auth","response","axios","get","concat","API_USER","headers","Authorization","handleApiResponse","err","handleApiError","fetchRevenue","year","updateOrderStatus","id","data","post","HomePage","callApiWithToken","useAuth","currentYear","Date","getFullYear","selectedYear","setSelectedYear","useState","lineData","setLineData","loading","setLoading","errorMsg","setErrorMsg","useEffect","res","json","Array","isArray","Error","sorted","sort","a","b","Number","month","e","message","loadRevenue","yearOptions","from","length","_","i","_jsxs","Box","sx","padding","children","_jsx","Typography","variant","gutterBottom","Grid","container","spacing","marginTop","item","xs","md","Paper","p","display","alignItems","gap","mb","FormControl","size","Select","value","onChange","target","map","y","MenuItem","height","justifyContent","CircularProgress","color","ResponsiveContainer","width","LineChart","XAxis","dataKey","YAxis","Tooltip","Line","type","stroke"],"sourceRoot":""}